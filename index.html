<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Flipbook Viewer</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- PDF.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>

    <!-- StPageFlip -->
    <script src="https://unpkg.com/page-flip/dist/js/page-flip.browser.js"></script>

    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    </script>

    <style>
        body {
            background-color: #1a1a1a;
            background-image: radial-gradient(#333 1px, transparent 1px);
            background-size: 20px 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
        }

        /* Header controls */
        .header-controls {
            height: 50px;
            z-index: 50;
            position: relative;
            background-color: rgba(17, 24, 39, 0.9);
        }

        /* Container buku */
        .book-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            height: calc(100vh - 50px);
            width: 100%;
            overflow: hidden;
            padding: 20px;
        }

        #flipbook {
            height: 100%;
        }

        .page-content {
            background-color: white;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .blank-page {
            background-color: #ffffff;
        }

        .stf__block {
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5) !important;
        }

        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>

<body class="text-white">

    <!-- Header Controls -->
    <div class="w-full px-4 shadow-lg flex justify-between items-center header-controls">
        <div class="flex items-center space-x-4">
            <h1 class="text-lg font-bold text-blue-400 truncate hidden sm:block">My Flipbook</h1>
        </div>

        <div class="text-center text-sm text-gray-400 absolute left-1/2 transform -translate-x-1/2 hidden md:block"
            id="page-info">
            Memuat sistem...
        </div>

        <!-- Tombol Navigasi Diperbarui -->
        <div class="flex space-x-1 sm:space-x-2">
            <!-- Tombol Awal -->
            <button id="first-btn" title="Ke Halaman Awal"
                class="bg-gray-700 hover:bg-gray-600 text-white px-2 sm:px-3 py-1 rounded text-xs sm:text-sm disabled:opacity-50">
                &laquo; <span class="hidden sm:inline">Awal</span>
            </button>

            <button id="prev-btn" title="Halaman Sebelumnya"
                class="bg-gray-700 hover:bg-gray-600 text-white px-2 sm:px-3 py-1 rounded text-xs sm:text-sm disabled:opacity-50">
                &larr; <span class="hidden sm:inline">Prev</span>
            </button>

            <button id="next-btn" title="Halaman Selanjutnya"
                class="bg-gray-700 hover:bg-gray-600 text-white px-2 sm:px-3 py-1 rounded text-xs sm:text-sm disabled:opacity-50">
                <span class="hidden sm:inline">Next</span> &rarr;
            </button>

            <!-- Tombol Akhir -->
            <button id="last-btn" title="Ke Halaman Akhir"
                class="bg-gray-700 hover:bg-gray-600 text-white px-2 sm:px-3 py-1 rounded text-xs sm:text-sm disabled:opacity-50">
                <span class="hidden sm:inline">Akhir</span> &raquo;
            </button>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loader-container"
        class="absolute inset-0 flex flex-col justify-center items-center bg-black bg-opacity-90 z-40"
        style="top: 50px;">
        <div class="loader block mb-4"></div>
        <p class="text-white" id="loading-text">Sedang memuat file PDF...</p>
        <p class="text-xs text-gray-500 mt-2">(Pastikan file PDF ada di folder yang sama)</p>
    </div>

    <!-- Area Buku -->
    <div class="book-wrapper">
        <div id="flipbook" class="hidden"></div>
    </div>

    <script>
        // ==========================================
        // KONFIGURASI FILE
        // ==========================================
        const PDF_FILENAME = 'merged_output.pdf'; // Ganti sesuai nama file Anda

        // Ukuran target (A4 / 1240x1754)
        const ORIGINAL_WIDTH = 1240;
        const ORIGINAL_HEIGHT = 1754;

        let pageFlip = null;
        let pdfDoc = null;

        const flipbookEl = document.getElementById('flipbook');
        const loaderContainer = document.getElementById('loader-container');
        const loadingText = document.getElementById('loading-text');
        const pageInfo = document.getElementById('page-info');

        // Element Tombol
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const firstBtn = document.getElementById('first-btn');
        const lastBtn = document.getElementById('last-btn');

        // Jalankan otomatis saat halaman dibuka
        window.addEventListener('DOMContentLoaded', () => {
            loadPDF(PDF_FILENAME);
        });

        // ==========================================
        // EVENT LISTENER NAVIGASI
        // ==========================================

        // Tombol Sebelumnya
        prevBtn.addEventListener('click', () => {
            if (pageFlip) pageFlip.flipPrev();
        });

        // Tombol Selanjutnya
        nextBtn.addEventListener('click', () => {
            if (pageFlip) pageFlip.flipNext();
        });

        // Tombol Ke Halaman Paling Awal (Cover)
        firstBtn.addEventListener('click', () => {
            if (pageFlip) {
                pageFlip.flip(0); // Index 0 selalu halaman pertama
            }
        });

        // Tombol Ke Halaman Paling Akhir
        lastBtn.addEventListener('click', () => {
            if (pageFlip) {
                // Mendapatkan total halaman saat ini di flipbook
                const totalPages = pageFlip.getPageCount();
                // Flip ke index terakhir (total - 1 karena index dimulai dari 0)
                pageFlip.flip(totalPages - 1);
            }
        });

        function createBlankPage() {
            const canvas = document.createElement('canvas');
            canvas.className = 'page-content blank-page';
            canvas.width = ORIGINAL_WIDTH;
            canvas.height = ORIGINAL_HEIGHT;
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            return canvas;
        }

        async function loadPDF(url) {
            try {
                loadingText.innerText = `Mengakses ${url}...`;
                const loadingTask = pdfjsLib.getDocument(url);
                pdfDoc = await loadingTask.promise;

                const totalPages = pdfDoc.numPages;
                loadingText.innerText = `Merender ${totalPages} halaman...`;

                const canvasPromises = [];
                for (let i = 1; i <= totalPages; i++) {
                    const canvas = document.createElement('canvas');
                    canvas.className = 'page-content';
                    canvas.width = ORIGINAL_WIDTH;
                    canvas.height = ORIGINAL_HEIGHT;
                    flipbookEl.appendChild(canvas);

                    canvasPromises.push(renderPageToCanvas(i, canvas));

                    // Sisipkan halaman kosong setelah cover
                    if (i === 1) {
                        const blankPage = createBlankPage();
                        flipbookEl.appendChild(blankPage);
                    }
                }

                await Promise.all(canvasPromises);

                initFlipbook();
                loaderContainer.classList.add('hidden');
                flipbookEl.classList.remove('hidden');

            } catch (error) {
                console.error("Error:", error);
                loaderContainer.innerHTML = `
                    <div class="text-red-500 text-center p-4">
                        <h2 class="text-xl font-bold mb-2">Gagal Memuat PDF</h2>
                        <p class="mb-4 text-white">${error.message}</p>
                        <div class="bg-gray-800 p-4 rounded text-left text-sm text-gray-300">
                             <p class="font-bold text-yellow-400 mb-2">Tips Perbaikan:</p>
                             <ul class="list-disc pl-5 space-y-1">
                                <li>Pastikan nama file '${PDF_FILENAME}' sesuai.</li>
                                <li>Gunakan Local Server (Live Server) untuk menghindari error CORS.</li>
                             </ul>
                        </div>
                    </div>
                `;
            }
        }

        async function renderPageToCanvas(pageNumber, canvas) {
            const page = await pdfDoc.getPage(pageNumber);
            const viewportUnscaled = page.getViewport({ scale: 1.0 });
            const scaleX = ORIGINAL_WIDTH / viewportUnscaled.width;
            const viewport = page.getViewport({ scale: scaleX });

            const context = canvas.getContext('2d');
            canvas.style.width = "100%";
            canvas.style.height = "100%";

            await page.render({
                canvasContext: context,
                viewport: viewport
            }).promise;
        }

        function initFlipbook() {
            pageFlip = new St.PageFlip(document.getElementById('flipbook'), {
                width: ORIGINAL_WIDTH / 1,
                height: ORIGINAL_HEIGHT,
                size: "stretch",
                minWidth: 300,
                minHeight: 400,
                maxWidth: null,
                maxHeight: null,
                showCover: true,
                mobileScrollSupport: true,
                maxShadowOpacity: 0.5,
                usePortrait: false,
                startPage: 0
            });

            pageFlip.loadFromHTML(document.querySelectorAll('.page-content'));

            pageFlip.on('flip', (e) => {
                let current = pageFlip.getCurrentPageIndex();
                let displayPage;

                if (current === 0) {
                    displayPage = 1;
                } else if (current === 1) {
                    displayPage = "Kosong";
                } else {
                    displayPage = current;
                }

                const totalFlipPages = pageFlip.getPageCount();
                pageInfo.innerText = `Halaman Flipbook: ${current + 1}/${totalFlipPages} (PDF: ${displayPage})`;

                // Update status tombol (opsional: disable tombol jika di ujung)
                firstBtn.disabled = current === 0;
                prevBtn.disabled = current === 0;
                nextBtn.disabled = current === totalFlipPages - 1;
                lastBtn.disabled = current === totalFlipPages - 1;
            });

            // Trigger update status tombol saat pertama load
            const initialIndex = pageFlip.getCurrentPageIndex();
            firstBtn.disabled = initialIndex === 0;
            prevBtn.disabled = initialIndex === 0;
        }

        window.addEventListener('resize', () => {
            if (pageFlip) pageFlip.update();
        });
    </script>
</body>

=======
<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Flipbook Viewer</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- PDF.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>

    <!-- StPageFlip -->
    <script src="https://unpkg.com/page-flip/dist/js/page-flip.browser.js"></script>

    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    </script>

    <style>
        body {
            background-color: #1a1a1a;
            background-image: radial-gradient(#333 1px, transparent 1px);
            background-size: 20px 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
        }

        /* Header controls */
        .header-controls {
            height: 50px;
            z-index: 50;
            position: relative;
            background-color: rgba(17, 24, 39, 0.9);
        }

        /* Container buku */
        .book-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            height: calc(100vh - 50px);
            width: 100%;
            overflow: hidden;
            padding: 20px;
        }

        #flipbook {
            height: 100%;
        }

        .page-content {
            background-color: white;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .blank-page {
            background-color: #ffffff;
        }

        .stf__block {
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5) !important;
        }

        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>

<body class="text-white">

    <!-- Header Controls -->
    <div class="w-full px-4 shadow-lg flex justify-between items-center header-controls">
        <div class="flex items-center space-x-4">
            <h1 class="text-lg font-bold text-blue-400 truncate hidden sm:block">My Flipbook</h1>
        </div>

        <div class="text-center text-sm text-gray-400 absolute left-1/2 transform -translate-x-1/2 hidden md:block"
            id="page-info">
            Memuat sistem...
        </div>

        <!-- Tombol Navigasi Diperbarui -->
        <div class="flex space-x-1 sm:space-x-2">
            <!-- Tombol Awal -->
            <button id="first-btn" title="Ke Halaman Awal"
                class="bg-gray-700 hover:bg-gray-600 text-white px-2 sm:px-3 py-1 rounded text-xs sm:text-sm disabled:opacity-50">
                &laquo; <span class="hidden sm:inline">Awal</span>
            </button>

            <button id="prev-btn" title="Halaman Sebelumnya"
                class="bg-gray-700 hover:bg-gray-600 text-white px-2 sm:px-3 py-1 rounded text-xs sm:text-sm disabled:opacity-50">
                &larr; <span class="hidden sm:inline">Prev</span>
            </button>

            <button id="next-btn" title="Halaman Selanjutnya"
                class="bg-gray-700 hover:bg-gray-600 text-white px-2 sm:px-3 py-1 rounded text-xs sm:text-sm disabled:opacity-50">
                <span class="hidden sm:inline">Next</span> &rarr;
            </button>

            <!-- Tombol Akhir -->
            <button id="last-btn" title="Ke Halaman Akhir"
                class="bg-gray-700 hover:bg-gray-600 text-white px-2 sm:px-3 py-1 rounded text-xs sm:text-sm disabled:opacity-50">
                <span class="hidden sm:inline">Akhir</span> &raquo;
            </button>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loader-container"
        class="absolute inset-0 flex flex-col justify-center items-center bg-black bg-opacity-90 z-40"
        style="top: 50px;">
        <div class="loader block mb-4"></div>
        <p class="text-white" id="loading-text">Sedang memuat file PDF...</p>
        <p class="text-xs text-gray-500 mt-2">(Pastikan file PDF ada di folder yang sama)</p>
    </div>

    <!-- Area Buku -->
    <div class="book-wrapper">
        <div id="flipbook" class="hidden"></div>
    </div>

    <script>
        // ==========================================
        // KONFIGURASI FILE
        // ==========================================
        const PDF_FILENAME = 'merged_output.pdf'; // Ganti sesuai nama file Anda

        // Ukuran target (A4 / 1240x1754)
        const ORIGINAL_WIDTH = 1240;
        const ORIGINAL_HEIGHT = 1754;

        let pageFlip = null;
        let pdfDoc = null;

        const flipbookEl = document.getElementById('flipbook');
        const loaderContainer = document.getElementById('loader-container');
        const loadingText = document.getElementById('loading-text');
        const pageInfo = document.getElementById('page-info');

        // Element Tombol
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const firstBtn = document.getElementById('first-btn');
        const lastBtn = document.getElementById('last-btn');

        // Jalankan otomatis saat halaman dibuka
        window.addEventListener('DOMContentLoaded', () => {
            loadPDF(PDF_FILENAME);
        });

        // ==========================================
        // EVENT LISTENER NAVIGASI
        // ==========================================

        // Tombol Sebelumnya
        prevBtn.addEventListener('click', () => {
            if (pageFlip) pageFlip.flipPrev();
        });

        // Tombol Selanjutnya
        nextBtn.addEventListener('click', () => {
            if (pageFlip) pageFlip.flipNext();
        });

        // Tombol Ke Halaman Paling Awal (Cover)
        firstBtn.addEventListener('click', () => {
            if (pageFlip) {
                pageFlip.flip(0); // Index 0 selalu halaman pertama
            }
        });

        // Tombol Ke Halaman Paling Akhir
        lastBtn.addEventListener('click', () => {
            if (pageFlip) {
                // Mendapatkan total halaman saat ini di flipbook
                const totalPages = pageFlip.getPageCount();
                // Flip ke index terakhir (total - 1 karena index dimulai dari 0)
                pageFlip.flip(totalPages - 1);
            }
        });

        function createBlankPage() {
            const canvas = document.createElement('canvas');
            canvas.className = 'page-content blank-page';
            canvas.width = ORIGINAL_WIDTH;
            canvas.height = ORIGINAL_HEIGHT;
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            return canvas;
        }

        async function loadPDF(url) {
            try {
                loadingText.innerText = `Mengakses ${url}...`;
                const loadingTask = pdfjsLib.getDocument(url);
                pdfDoc = await loadingTask.promise;

                const totalPages = pdfDoc.numPages;
                loadingText.innerText = `Merender ${totalPages} halaman...`;

                const canvasPromises = [];
                for (let i = 1; i <= totalPages; i++) {
                    const canvas = document.createElement('canvas');
                    canvas.className = 'page-content';
                    canvas.width = ORIGINAL_WIDTH;
                    canvas.height = ORIGINAL_HEIGHT;
                    flipbookEl.appendChild(canvas);

                    canvasPromises.push(renderPageToCanvas(i, canvas));

                    // Sisipkan halaman kosong setelah cover
                    if (i === 1) {
                        const blankPage = createBlankPage();
                        flipbookEl.appendChild(blankPage);
                    }
                }

                await Promise.all(canvasPromises);

                initFlipbook();
                loaderContainer.classList.add('hidden');
                flipbookEl.classList.remove('hidden');

            } catch (error) {
                console.error("Error:", error);
                loaderContainer.innerHTML = `
                    <div class="text-red-500 text-center p-4">
                        <h2 class="text-xl font-bold mb-2">Gagal Memuat PDF</h2>
                        <p class="mb-4 text-white">${error.message}</p>
                        <div class="bg-gray-800 p-4 rounded text-left text-sm text-gray-300">
                             <p class="font-bold text-yellow-400 mb-2">Tips Perbaikan:</p>
                             <ul class="list-disc pl-5 space-y-1">
                                <li>Pastikan nama file '${PDF_FILENAME}' sesuai.</li>
                                <li>Gunakan Local Server (Live Server) untuk menghindari error CORS.</li>
                             </ul>
                        </div>
                    </div>
                `;
            }
        }

        async function renderPageToCanvas(pageNumber, canvas) {
            const page = await pdfDoc.getPage(pageNumber);
            const viewportUnscaled = page.getViewport({ scale: 1.0 });
            const scaleX = ORIGINAL_WIDTH / viewportUnscaled.width;
            const viewport = page.getViewport({ scale: scaleX });

            const context = canvas.getContext('2d');
            canvas.style.width = "100%";
            canvas.style.height = "100%";

            await page.render({
                canvasContext: context,
                viewport: viewport
            }).promise;
        }

        function initFlipbook() {
            pageFlip = new St.PageFlip(document.getElementById('flipbook'), {
                width: ORIGINAL_WIDTH / 1,
                height: ORIGINAL_HEIGHT,
                size: "stretch",
                minWidth: 300,
                minHeight: 400,
                maxWidth: null,
                maxHeight: null,
                showCover: true,
                mobileScrollSupport: true,
                maxShadowOpacity: 0.5,
                usePortrait: false,
                startPage: 0
            });

            pageFlip.loadFromHTML(document.querySelectorAll('.page-content'));

            pageFlip.on('flip', (e) => {
                let current = pageFlip.getCurrentPageIndex();
                let displayPage;

                if (current === 0) {
                    displayPage = 1;
                } else if (current === 1) {
                    displayPage = "Kosong";
                } else {
                    displayPage = current;
                }

                const totalFlipPages = pageFlip.getPageCount();
                pageInfo.innerText = `Halaman Flipbook: ${current + 1}/${totalFlipPages} (PDF: ${displayPage})`;

                // Update status tombol (opsional: disable tombol jika di ujung)
                firstBtn.disabled = current === 0;
                prevBtn.disabled = current === 0;
                nextBtn.disabled = current === totalFlipPages - 1;
                lastBtn.disabled = current === totalFlipPages - 1;
            });

            // Trigger update status tombol saat pertama load
            const initialIndex = pageFlip.getCurrentPageIndex();
            firstBtn.disabled = initialIndex === 0;
            prevBtn.disabled = initialIndex === 0;
        }

        window.addEventListener('resize', () => {
            if (pageFlip) pageFlip.update();
        });
    </script>
</body>

>>>>>>> e448d3b90e7ddd7050e6dae5627fd2fc1e40725f
</html>